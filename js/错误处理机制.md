## é”™è¯¯å¤„ç†æœºåˆ¶

**1.Errorå®ä¾‹å¯¹è±¡**

> jsè§£ææˆ–è¿è¡Œæ—¶ï¼ŒæŠ›å‡ºçš„é”™è¯¯æ˜¯æ„é€ å‡½æ•°çš„å®ä¾‹

```javascript
> var err = new Error('å‡ºé”™äº†');
undefined
> err.message;
'å‡ºé”™äº†'
```

`Error`å¯¹è±¡å±æ€§

> `message`:é”™è¯¯æç¤ºä¿¡æ¯,å¿…é¡»é¡¹
>
> `name`:é”™è¯¯åç§°
>
> `stack`ï¼šé”™è¯¯å‘ç”Ÿæ—¶çš„å †æ ˆ

```javascript
function throwit(){
	throw new Error('é”™è¯¯');
}

function catchit(){
	try{
		throwit();
	}catch(e){
		console.log(e.name,' ',e.message,' ',e.stack);
	}
}
catchit();
//é”™è¯¯å †æ ˆçš„æœ€å†…å±‚æ˜¯throwitå‡½æ•°ï¼Œç„¶åæ˜¯catchitå‡½æ•°ï¼Œæœ€åæ˜¯å‡½æ•°çš„è¿è¡Œç¯å¢ƒ

// 	 Error   é”™è¯¯   Error: é”™è¯¯
//     at throwit (G:\es6\eventHandle.js:2:8)
//     at catchit (G:\es6\eventHandle.js:7:3)
//     at Object.<anonymous> (G:\es6\eventHandle.js:12:1)
//     at Module._compile (internal/modules/cjs/loader.js:956:30)
//     at Object.Module._extensions..js (internal/modules/cjs/loader.js:973:10)
//     at Module.load (internal/modules/cjs/loader.js:812:32)
//     at Function.Module._load (internal/modules/cjs/loader.js:724:14)
//     at Function.Module.runMain (internal/modules/cjs/loader.js:1025:10)

```

**2.åŸç”Ÿé”™è¯¯ç±»å‹ï¼š`Error`çš„6ä¸ªæ´¾ç”Ÿå¯¹è±¡**

> `SyntaxErrorå¯¹è±¡`:è¯­æ³•é”™è¯¯
>
> `ReferenceError`:å¼•ç”¨ä¸å­˜åœ¨çš„å˜é‡æ—¶å‘ç”Ÿçš„é”™è¯¯
>
> â€‹							å°†å€¼åˆ†é…ç»™æ— æ³•åˆ†é…çš„å¯¹è±¡
>
> `RangeError`:å€¼è¶…å‡ºæœ‰æ•ˆèŒƒå›´ï¼Œ
>
> ä¸»è¦æƒ…å†µï¼šæ•°ç»„é•¿åº¦ä¸ºè´Ÿï¼ŒNumberå‚æ•°è¶…å‡ºèŒƒå›´ï¼Œå‡½æ•°å †æ ˆè¶…å‡ºæœ€å¤§å€¼
>
> `TypeError`:å¯¹è±¡æ˜¯å˜é‡æˆ–å‚æ•°ä¸æ˜¯é¢„æœŸç±»å‹æ—¶å‘ç”Ÿçš„é”™è¯¯
>
> `URIError`ï¼šURIç›¸å…³å‡½æ•°å‚æ•°ä¸å¯¹æ—¶æŠ›å‡ºçš„é”™è¯¯
>
> ä¸»è¦æ¶‰åŠ:`encodeURI(),decodeURI(),encodeURIComponent(),decodeURIComponent(),escape(),unescape()`
>
> `EvalError`ï¼š`eval`æœªæ­£å¸¸æ‰§è¡Œæ—¶æŠ›å‡º

ä»¥ä¸Š6ä¸ªé”™è¯¯æ„é€ å‡½æ•°å‡å¯ä½¿ç”¨newç”Ÿæˆå¯¹è±¡

**3.è‡ªå®šä¹‰é”™è¯¯**

```javascript
function UserError(message){
	this.message = message||"é»˜è®¤é”™è¯¯";
	this.name = 'UserError';
}
UserError.prototype = new Error();
UserError.prototype.constructor = UserError;

console.log(new UserError("è‡ªå®šä¹‰é”™è¯¯"));
// Error
//     at Object.<anonymous> (G:\es6\eventHandle.js:27:23)
//     at Module._compile (internal/modules/cjs/loader.js:956:30)
//     at Object.Module._extensions..js (internal/modules/cjs/loader.js:973:10)
//     at Module.load (internal/modules/cjs/loader.js:812:32)
//     at Function.Module._load (internal/modules/cjs/loader.js:724:14)
//     at Function.Module.runMain (internal/modules/cjs/loader.js:1025:10)
//     at internal/main/run_main_module.js:17:11 {
//   message: 'è‡ªå®šä¹‰é”™è¯¯',
//   name: 'UserError'
// }
```

**4.throwè¯­å¥**ï¼šæ‰‹åŠ¨ä¸­æ–­ç¨‹åºæ‰§è¡Œï¼ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯

`throw`å¯ä»¥ä»»ä½•ç±»å‹çš„å€¼ï¼Œå‚æ•°å¯ä»¥æ˜¯ä»»ä½•å€¼

```javascript
var x = -1;
if(x<=0){
	throw new Error('Errorå®ä¾‹ï¼Œxå¿…é¡»ä¸ºæ•´æ•°ã€‚');
}
// G:\es6\eventHandle.js:45
//         throw new Error('Errorå®ä¾‹ï¼Œxå¿…é¡»ä¸ºæ•´æ•°ã€‚');
//         ^

// Error: Errorå®ä¾‹ï¼Œxå¿…é¡»ä¸ºæ•´æ•°ã€‚
//     at Object.<anonymous> (G:\es6\eventHandle.js:45:8)
// [90m    at Module._compile (internal/modules/cjs/loader.js:956:30)[39m
// [90m    at Object.Module._extensions..js (internal/modules/cjs/loader.js:973:10)[39m
// [90m    at Module.load (internal/modules/cjs/loader.js:812:32)[39m
// [90m    at Function.Module._load (internal/modules/cjs/loader.js:724:14)[39m
// [90m    at Function.Module.runMain (internal/modules/cjs/loader.js:1025:10)[39m
// [90m    at internal/main/run_main_module.js:17:11[39m

function UserError(message){
	this.message = message || "default error";
	this.name = 'UserError';
}
throw new UserError("è‡ªå®šä¹‰é”™è¯¯");
// throw new UserError("è‡ªå®šä¹‰é”™è¯¯");
// ^
// UserError { message: [32m'è‡ªå®šä¹‰é”™è¯¯'[39m, name: [32m'UserError'[39m }

> throw 'Error!';
Thrown: 'Error!'
> throw 33
Thrown: 33
> throw true;
Thrown: true
> throw {toString:function(){
... return 'æŠ›å‡ºå¯¹è±¡';
... }
... };
Thrown: { toString: [Function: toString] }
```

5.try...catchç»“æ„ ï¼Œå¦‚æœtryé”™è¯¯å°±è¿è¡Œcatchä»£ç å—ï¼Œcatchæ•è·é”™è¯¯åï¼Œç¨‹åºä¸ä¼šä¸­æ–­ï¼ŒæŒ‰æ­£å¸¸æµç¨‹ç»§ç»­è¿è¡Œ

```javascript
try{
    f();
}catch(e){
    //å¤„ç†é”™è¯¯
}
```

**6.finally**ï¼šä¸è®ºæ˜¯å¦å‡ºç°é”™è¯¯éƒ½å¿…é¡»è¿è¡Œçš„è¯­å¥

```javascript
function cleanUp{
    try
}
```

```javascript
//å¦‚æœtryæŠ›å‡ºé”™è¯¯ï¼Œæ²¡æœ‰catchå—ï¼Œä»£ç ä¸­æ–­æ‰§è¡Œå‰å…ˆè¿è¡Œfinally
function cleanUp(){
	try{
		throw new Error('å‡ºé”™äº†...');
		console.log('æ­¤è¡Œä¸æ‰§è¡Œ');
	}
	finally{
		console.log('å®Œæˆæ¸…ç†å·¥ä½œ');
	}
}
cleanUp();
// å®Œæˆæ¸…ç†å·¥ä½œ
// G:\es6\eventHandle.js:71
//                 throw new Error('å‡ºé”™äº†...');
//                 ^

// Error: å‡ºé”™äº†...
//     at cleanUp (G:\es6\eventHandle.js:71:9)
//     at Object.<anonymous> (G:\es6\eventHandle.js:78:1)
//     at Module._compile (internal/modules/cjs/loader.js:956:30)
//     at Object.Module._extensions..js (internal/modules/cjs/loader.js:973:10)
//     at Module.load (internal/modules/cjs/loader.js:812:32)
//     at Function.Module._load (internal/modules/cjs/loader.js:724:14)
//     at Function.Module.runMain (internal/modules/cjs/loader.js:1025:10)
//     at internal/main/run_main_module.js:17:11
```

```javascript
//å¦‚æœtryæŠ›å‡ºé”™è¯¯ï¼Œæœ‰catchå—ï¼Œé¡ºåºæ‰§è¡Œ
function cleanUp(){
	try{
		throw new Error('å‡ºé”™äº†...');
		console.log('æ­¤è¡Œä¸æ‰§è¡Œ');
	}
	catch(e){
		console.log(e);
	}
	finally{
		console.log('å®Œæˆæ¸…ç†å·¥ä½œ');
	}
}
cleanUp();
//Error: å‡ºé”™äº†...
//     at cleanUp (G:\es6\eventHandle.js:71:9)
//     at Object.<anonymous> (G:\es6\eventHandle.js:80:1)
//     at Module._compile (internal/modules/cjs/loader.js:956:30)
//     at Object.Module._extensions..js (internal/modules/cjs/loader.js:973:10)
//     at Module.load (internal/modules/cjs/loader.js:812:32)
//     at Function.Module._load (internal/modules/cjs/loader.js:724:14)
//     at Function.Module.runMain (internal/modules/cjs/loader.js:1025:10)
//     at internal/main/run_main_module.js:17:11
// å®Œæˆæ¸…ç†å·¥ä½œ
```

```javascript
//å¦‚æœtryæ²¡å‡ºé”™ï¼Œå…ˆfinally,å†return;
var count = 0;
function countUp(){
	try{
		return count;
	}finally{
		count++;
	}
}
countUp();
console.log(count);	//1
```

**finallyå…¸å‹ä½¿ç”¨åœºæ™¯**

```javascript
openFile();
try{
    writeFile(Data);
}catch(e){
    handleError(e);
}finally{
    closeFile();
}
//å¦‚æœtryæ²¡æœ‰é”™è¯¯ï¼Œtry->finally,
//å¦‚æœtryæœ‰é”™è¯¯,catch->finally
```

catchä»£ç å—è§¦å‘è½¬å…¥finallyä»£ç å—çš„é”™è¯¯ï¼Œæœ‰return è¯­å¥ï¼Œthrowè¯­å¥

tryå¯ä»¥åµŒå¥—tryè¯­å¥

```javascript
try{
	try{
		log('hello world');//logæœªå®šä¹‰
	}
	finally{
		console.log('Finally');
	}
	console.log('Will I run?');	//ä¸æ‰§è¡Œ
}catch(e){
	console.log(e.message);	//è¾“å‡ºé”™è¯¯
}
// Finally
// log is not defined
```

